apiVersion: v2
name: aiobs-stack
description: AI Observability Summarizer - Full Stack Deployment
type: application
version: 0.1.0
appVersion: "1.0.0"

# Single umbrella chart combining all components:
# - Application: MCP Server, Console Plugin, RAG, Alerting
# - Infrastructure: Tempo, Loki, OTEL, MinIO, Korrel8r

dependencies:
  # =============================================================================
  # APPLICATION COMPONENTS (deployed in CR namespace)
  # =============================================================================

  # MCP Server - Model Context Protocol server for AI observability
  - name: mcp-server
    version: ">=0.0.0"
    repository: "file://../mcp-server"
    condition: mcpServer.enabled

  # OpenShift Console Plugin - Native console integration
  - name: openshift-console-plugin
    version: ">=0.0.0"
    repository: "file://../openshift-console-plugin"
    condition: consolePlugin.enabled
    alias: consolePlugin

  # Alerting - Alert processing CronJob
  - name: alerts
    version: ">=0.0.0"
    repository: "file://../alerting"
    condition: alerting.enabled
    alias: alerting

  # RAG - LLM stack (llama-stack, llm-service, pgvector)
  - name: rag
    version: ">=0.0.0"
    repository: "file://../rag"
    condition: rag.enabled

  # =============================================================================
  # INFRASTRUCTURE COMPONENTS (deployed to fixed namespaces)
  # =============================================================================

  # TempoStack - Distributed tracing backend (observability-hub)
  - name: tempo-stack
    version: ">=0.0.0"
    repository: "file://../observability/tempo"
    condition: tempo.enabled
    alias: tempo

  # LokiStack - Log aggregation (openshift-logging)
  - name: loki-stack
    version: ">=0.0.0"
    repository: "file://../observability/loki"
    condition: loki.enabled
    alias: loki

  # OpenTelemetry Collector - Trace/metric collection (observability-hub)
  - name: otel-collector
    version: ">=0.0.0"
    repository: "file://../observability/otel-collector"
    condition: otelCollector.enabled

  # Korrel8r - Signal correlation engine (openshift-cluster-observability-operator)
  - name: korrel8r
    version: ">=0.0.0"
    repository: "file://../observability/korrel8r"
    condition: korrel8r.enabled

  # MinIO - S3-compatible object storage (observability-hub)
  - name: minio-observability-storage
    version: ">=0.0.0"
    repository: "file://../minio"
    condition: minio.enabled
    alias: minio
